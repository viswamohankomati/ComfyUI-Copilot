2025-08-25 19:29:38 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-08-25 19:30:09 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-08-25 19:30:09 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 1
2025-08-25 19:30:09 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-08-25 19:30:09 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-08-25 19:30:10 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-08-25 19:30:10 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 1 historical messages
2025-08-25 19:30:10 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 1 for session 2c810ca1-592b-43fb-9020-cd081b955cc1
2025-08-25 19:30:10 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '2c810ca1-592b-43fb-9020-cd081b955cc1', 'workflow_checkpoint_id': 1, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-08-25 19:30:11 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 1 messages
2025-08-25 19:30:11 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-08-25 19:30:11 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-08-25 19:30:14 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-08-25 19:30:14 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-08-25 19:30:14 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-08-25 19:30:14 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-08-26 11:17:49 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-08-26 11:31:49 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-08-26 11:31:49 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 2
2025-08-26 11:31:49 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-08-26 11:31:49 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-08-26 11:31:50 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-08-26 11:31:50 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 1 historical messages
2025-08-26 11:31:50 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 2 for session ddc78277-cc9d-4dc2-85fe-a5992a3bbe4b
2025-08-26 11:31:50 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': 'ddc78277-cc9d-4dc2-85fe-a5992a3bbe4b', 'workflow_checkpoint_id': 2, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-08-26 11:31:51 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 1 messages
2025-08-26 11:31:51 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-08-26 11:31:51 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-08-26 11:31:55 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-08-26 11:31:55 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-08-26 11:31:55 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-08-26 11:31:55 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-08-26 11:32:01 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-08-26 11:32:01 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 3
2025-08-26 11:32:01 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-08-26 11:32:01 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-08-26 11:32:01 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-08-26 11:32:01 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 3 historical messages
2025-08-26 11:32:01 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 3 for session ddc78277-cc9d-4dc2-85fe-a5992a3bbe4b
2025-08-26 11:32:01 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': 'ddc78277-cc9d-4dc2-85fe-a5992a3bbe4b', 'workflow_checkpoint_id': 3, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-08-26 11:32:02 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 3 messages
2025-08-26 11:32:02 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-08-26 11:32:02 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-08-26 11:32:02 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-08-26 11:32:02 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-08-26 11:32:02 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-08-26 11:32:02 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-08-26 11:54:18 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-08-26 12:01:52 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-08-26 12:02:13 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-08-26 12:02:13 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 4
2025-08-26 12:02:13 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-08-26 12:02:13 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-08-26 12:02:13 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-08-26 12:02:13 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 1 historical messages
2025-08-26 12:02:13 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 4 for session 21497e85-5e42-4b77-a328-49fa524cc3be
2025-08-26 12:02:13 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '21497e85-5e42-4b77-a328-49fa524cc3be', 'workflow_checkpoint_id': 4, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-08-26 12:02:14 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 1 messages
2025-08-26 12:02:14 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-08-26 12:02:14 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-08-26 12:02:20 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-08-26 12:02:20 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-08-26 12:02:20 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-08-26 12:02:20 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-08-26 15:31:19 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 13:23:04 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 13:23:16 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 13:23:16 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 5
2025-09-10 13:23:16 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 13:23:16 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 13:23:16 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 13:23:16 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 1 historical messages
2025-09-10 13:23:16 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 5 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 13:23:16 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 5, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 13:23:17 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 1 messages
2025-09-10 13:23:17 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 13:23:17 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 13:23:21 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 13:23:21 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 13:23:21 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 13:23:21 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 14:36:17 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 14:46:00 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 14:47:13 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 14:47:14 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 6
2025-09-10 14:47:14 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 14:47:14 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 14:47:15 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 14:47:15 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 3 historical messages
2025-09-10 14:47:15 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 6 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 14:47:15 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 6, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 14:47:16 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 3 messages
2025-09-10 14:47:16 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 14:47:16 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 14:47:21 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 14:47:21 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 14:47:21 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 14:47:21 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 14:57:47 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:00:29 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:03:53 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:10:53 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:10:55 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:10:58 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:11:01 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:12:56 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:13:51 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:14:10 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:14:11 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 7
2025-09-10 15:14:11 | INFO     | conversation_api.py:invoke_debug:380 | Received debug-agent request
2025-09-10 15:14:11 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:14:11 | INFO     | conversation_api.py:invoke_debug:415 | Debug agent config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'model': 'gemini-2.5-flash', 'openai_api_key': None, 'openai_base_url': 'https://api.openai.com/v1'}
2025-09-10 15:14:11 | INFO     | conversation_api.py:invoke_debug:416 | Session ID: 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:14:11 | INFO     | conversation_api.py:invoke_debug:417 | Workflow nodes: ['3', '4', '5', '6', '7', '8', '9']
2025-09-10 15:14:11 | INFO     | debug_agent.py:debug_workflow_errors:213 | Saving workflow data for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:14:11 | INFO     | debug_agent.py:debug_workflow_errors:219 | Workflow saved with version ID: 8
2025-09-10 15:14:11 | INFO     | debug_agent.py:debug_workflow_errors:489 | -- Starting workflow validation process for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:14:12 | INFO     | debug_agent.py:debug_workflow_errors:496 | === Debug Coordinator starting ===
2025-09-10 15:14:12 | INFO     | debug_agent.py:debug_workflow_errors:523 | Handoff to: ComfyUI-Debug-Coordinator
2025-09-10 15:14:12 | INFO     | conversation_api.py:invoke_debug:541 | Debug completion checkpoint saved with ID: 9
2025-09-10 15:14:12 | INFO     | conversation_api.py:invoke_debug:546 | Debug agent processing complete
2025-09-10 15:14:13 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:14:13 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:15:09 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:15:09 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:15:09 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:15:09 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:15:09 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:15:13 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:15:13 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:15:13 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:15:14 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:15:14 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:15:14 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:15:14 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:15:14 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:15:14 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:15:14 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:15:15 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:15:15 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:15:15 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:22:25 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:22:26 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:22:26 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:22:26 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:22:26 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 9
2025-09-10 15:22:28 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:22:28 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 10
2025-09-10 15:22:28 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:22:28 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:22:28 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:22:28 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 10 historical messages
2025-09-10 15:22:28 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 10 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:22:28 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 10, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 15:22:29 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 10 messages
2025-09-10 15:22:29 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:22:29 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:22:29 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:22:29 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:22:29 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:22:29 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:22:34 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:22:35 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 11
2025-09-10 15:22:35 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:22:35 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:22:35 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:22:35 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 12 historical messages
2025-09-10 15:22:35 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 11 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:22:35 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 11, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 15:22:35 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 12 messages
2025-09-10 15:22:35 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:22:35 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:22:36 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:22:36 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:22:36 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:22:36 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:22:41 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:22:41 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 12
2025-09-10 15:22:41 | INFO     | conversation_api.py:invoke_debug:380 | Received debug-agent request
2025-09-10 15:22:41 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:22:41 | INFO     | conversation_api.py:invoke_debug:415 | Debug agent config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'model': 'gemini-2.5-flash', 'openai_api_key': None, 'openai_base_url': 'https://api.openai.com/v1'}
2025-09-10 15:22:41 | INFO     | conversation_api.py:invoke_debug:416 | Session ID: 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:22:41 | INFO     | conversation_api.py:invoke_debug:417 | Workflow nodes: ['3', '4', '5', '6', '7', '8', '9']
2025-09-10 15:22:41 | INFO     | debug_agent.py:debug_workflow_errors:213 | Saving workflow data for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:22:41 | INFO     | debug_agent.py:debug_workflow_errors:219 | Workflow saved with version ID: 13
2025-09-10 15:22:41 | INFO     | debug_agent.py:debug_workflow_errors:489 | -- Starting workflow validation process for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:22:41 | INFO     | debug_agent.py:debug_workflow_errors:496 | === Debug Coordinator starting ===
2025-09-10 15:22:41 | INFO     | debug_agent.py:debug_workflow_errors:523 | Handoff to: ComfyUI-Debug-Coordinator
2025-09-10 15:22:42 | INFO     | conversation_api.py:invoke_debug:541 | Debug completion checkpoint saved with ID: 14
2025-09-10 15:22:42 | INFO     | conversation_api.py:invoke_debug:546 | Debug agent processing complete
2025-09-10 15:22:42 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 15:22:42 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 14
2025-09-10 15:27:58 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:27:58 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 15
2025-09-10 15:27:58 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:27:58 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:27:58 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:27:58 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 16 historical messages
2025-09-10 15:27:58 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 15 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:27:58 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 15, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 15:28:05 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 16 messages
2025-09-10 15:28:05 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:28:05 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:28:10 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:28:10 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:28:10 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:28:10 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:28:18 | INFO     | conversation_api.py:restore_workflow_checkpoint:325 | Received restore-workflow-checkpoint request
2025-09-10 15:28:18 | INFO     | conversation_api.py:restore_workflow_checkpoint:353 | Restored workflow checkpoint version ID: 12
2025-09-10 15:32:30 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:32:30 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 16
2025-09-10 15:32:30 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:32:30 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:32:30 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:32:30 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 20 historical messages
2025-09-10 15:32:30 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 16 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:32:30 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 16, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gpt-4.1'}
2025-09-10 15:32:31 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 20 messages
2025-09-10 15:32:31 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:32:31 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:32:31 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:32:31 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:32:31 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:32:31 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:40:02 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:40:02 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 17
2025-09-10 15:40:02 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:40:02 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:40:02 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:40:02 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 23 historical messages
2025-09-10 15:40:02 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 17 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:40:02 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 17, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gpt-4.1'}
2025-09-10 15:40:17 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 23 messages
2025-09-10 15:40:17 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:40:17 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:40:20 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:40:20 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:40:20 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:40:20 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:40:56 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:40:56 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 18
2025-09-10 15:40:56 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:40:56 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:40:56 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:40:56 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 25 historical messages
2025-09-10 15:40:56 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 18 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:40:56 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 18, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gpt-4.1'}
2025-09-10 15:40:56 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 25 messages
2025-09-10 15:40:56 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:40:56 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:40:57 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:40:57 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:40:57 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:40:57 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:42:03 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:42:03 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 19
2025-09-10 15:42:03 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:42:03 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:42:03 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:42:03 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 27 historical messages
2025-09-10 15:42:03 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 19 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:42:03 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 19, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gpt-4.1'}
2025-09-10 15:42:07 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 27 messages
2025-09-10 15:42:07 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:42:07 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:42:09 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:42:09 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:42:09 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:42:09 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:45:39 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 15:46:26 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:46:27 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 20
2025-09-10 15:46:27 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:46:27 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:46:27 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:46:27 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 29 historical messages
2025-09-10 15:46:27 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 20 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:46:27 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 20, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 15:46:28 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 29 messages
2025-09-10 15:46:28 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:46:28 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:46:28 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:46:28 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:46:28 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:46:28 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:46:32 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:46:32 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 21
2025-09-10 15:46:32 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:46:32 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:46:32 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:46:32 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 31 historical messages
2025-09-10 15:46:32 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 21 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:46:32 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 21, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 15:46:33 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 31 messages
2025-09-10 15:46:33 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:46:33 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:46:34 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:46:34 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:46:34 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:46:34 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:47:19 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:47:20 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 22
2025-09-10 15:47:21 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:47:21 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:47:21 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:47:21 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 33 historical messages
2025-09-10 15:47:21 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 22 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:47:21 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 22, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 15:47:23 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 33 messages
2025-09-10 15:47:23 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:47:23 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:47:24 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:47:24 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:47:24 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:47:24 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 15:47:26 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 15:47:27 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 23
2025-09-10 15:47:27 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 15:47:27 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 15:47:27 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 15:47:27 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 35 historical messages
2025-09-10 15:47:27 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 23 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 15:47:27 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 23, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 15:47:28 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 35 messages
2025-09-10 15:47:28 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 15:47:28 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 15:47:29 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 15:47:29 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 15:47:29 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 15:47:29 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 16:01:34 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 16:01:37 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 24
2025-09-10 16:01:38 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 16:01:38 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 16:01:38 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 16:01:38 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 37 historical messages
2025-09-10 16:01:38 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 24 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 16:01:38 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 24, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 16:01:42 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 37 messages
2025-09-10 16:01:42 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 16:01:42 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 16:01:43 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 16:01:43 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 16:01:43 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 16:01:43 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 16:04:08 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 16:04:17 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 16:04:22 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 16:22:53 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 16:32:27 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 16:32:28 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 25
2025-09-10 16:32:28 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 16:32:28 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: null...
2025-09-10 16:32:28 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 16:32:28 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 39 historical messages
2025-09-10 16:32:28 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 25 for session 3f2be485-46c7-498a-a012-78e75a7b7e2e
2025-09-10 16:32:28 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '3f2be485-46c7-498a-a012-78e75a7b7e2e', 'workflow_checkpoint_id': 25, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 16:32:30 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 39 messages
2025-09-10 16:32:30 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 16:32:30 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 16:32:30 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 16:32:30 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 16:32:30 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 16:32:30 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 0 chars, ext: False, finished: True
2025-09-10 17:53:05 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 17:55:35 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 17:55:35 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 26
2025-09-10 17:55:35 | INFO     | conversation_api.py:invoke_debug:380 | Received debug-agent request
2025-09-10 17:55:35 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 17:55:35 | INFO     | conversation_api.py:invoke_debug:415 | Debug agent config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'model': 'gemini-2.5-flash', 'openai_api_key': None, 'openai_base_url': 'https://api.openai.com/v1'}
2025-09-10 17:55:35 | INFO     | conversation_api.py:invoke_debug:416 | Session ID: 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 17:55:35 | INFO     | conversation_api.py:invoke_debug:417 | Workflow nodes: ['3', '4', '5', '6', '7', '8', '9']
2025-09-10 17:55:35 | INFO     | debug_agent.py:debug_workflow_errors:213 | Saving workflow data for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 17:55:35 | INFO     | debug_agent.py:debug_workflow_errors:219 | Workflow saved with version ID: 27
2025-09-10 17:55:35 | INFO     | debug_agent.py:debug_workflow_errors:489 | -- Starting workflow validation process for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 17:55:36 | INFO     | debug_agent.py:debug_workflow_errors:496 | === Debug Coordinator starting ===
2025-09-10 17:55:36 | INFO     | debug_agent.py:debug_workflow_errors:523 | Handoff to: ComfyUI-Debug-Coordinator
2025-09-10 17:55:43 | INFO     | debug_agent.py:debug_workflow_errors:551 | -- Tool called: run_workflow
2025-09-10 17:55:43 | INFO     | debug_agent.py:run_workflow:34 | Run workflow for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 17:55:43 | INFO     | debug_agent.py:run_workflow:49 | {'success': True, 'prompt_id': 'f7bb537e-197e-421c-8dd0-559d9cb22279', 'number': 0, 'node_errors': {}}
2025-09-10 17:55:49 | INFO     | debug_agent.py:debug_workflow_errors:627 | 
=== Debug process complete ===
2025-09-10 17:55:50 | INFO     | debug_agent.py:debug_workflow_errors:645 | Debug completion checkpoint saved with ID: 28
2025-09-10 17:55:50 | INFO     | conversation_api.py:invoke_debug:541 | Debug completion checkpoint saved with ID: 29
2025-09-10 17:55:50 | INFO     | conversation_api.py:invoke_debug:546 | Debug agent processing complete
2025-09-10 17:55:50 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 17:55:50 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 17:55:57 | INFO     | conversation_api.py:restore_workflow_checkpoint:325 | Received restore-workflow-checkpoint request
2025-09-10 17:55:57 | INFO     | conversation_api.py:restore_workflow_checkpoint:353 | Restored workflow checkpoint version ID: 28
2025-09-10 17:58:48 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 17:58:57 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 17:58:59 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 17:58:59 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 17:58:59 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 17:58:59 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 17:58:59 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 17:58:59 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 17:58:59 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 18:09:03 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 18:09:05 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 18:09:07 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 18:09:07 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 18:09:07 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 18:09:07 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 18:09:07 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 18:10:05 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 18:10:05 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 30
2025-09-10 18:10:05 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 18:10:05 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 18:10:05 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 18:10:05 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 3 historical messages
2025-09-10 18:10:05 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 30 for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 18:10:05 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'workflow_checkpoint_id': 30, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 18:10:29 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 3 messages
2025-09-10 18:10:30 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 18:10:30 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 18:10:38 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'recall_workflow' was called
2025-09-10 18:11:27 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'recall_workflow'
2025-09-10 18:11:27 | INFO     | mcp_client.py:process_stream_events:248 | -- Workflow tool 'recall_workflow' produced result with data: 3
2025-09-10 18:11:31 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'gen_workflow' was called
2025-09-10 18:12:14 | INFO     | mcp_client.py:process_stream_events:207 | -- Tool output: {"type":"text","text":"{\"answer\":\"Successfully generated a custom workflow: AI Generated Workflow\\n\\nAI has generated a personalized workflow solution for you. If you have any questions about the workflow, feel free to ask.\",\"data\":[{\"id\":35420,\"name\":\"AI Generated Workflow\",\"description\":\"Build a workflow to generate an image of a dog using the \\\"v1-5-pruned-emaonly\\\" checkpoint model.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"2f4b19d788a1e22c6e0af232cd9929df\",\"score\":null,\"source\":\"AI Generated\"}],\"ext\":[{\"type\":\"workflow\",\"data\":[{\"id\":35420,\"name\":\"AI Generated Workflow\",\"description\":\"Build a workflow to generate an image of a dog using the \\\"v1-5-pruned-emaonly\\\" checkpoint model.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"2f4b19d788a1e22c6e0af232cd9929df\",\"score\":null,\"source\":\"AI Generated\"}]}],\"instruction\":\"Build a workflow to generate an image of a dog using the \\\"v1-5-pruned-emaonly\\\" checkpoint model.\",\"keywords\":[\"dog\",\"image generation\",\"v1-5-pruned-emaonly\",\"checkpoint\"],\"source\":\"generated\"}","annotations":null,"meta":null}
2025-09-10 18:12:14 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'gen_workflow'
2025-09-10 18:12:14 | INFO     | mcp_client.py:process_stream_events:244 | -- Stored result for tool 'gen_workflow': data=1, ext=[{'type': 'workflow', 'data': [{'id': 35420, 'name': 'AI Generated Workflow', 'description': 'Build a workflow to generate an image of a dog using the "v1-5-pruned-emaonly" checkpoint model.', 'image': 'https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg', 'unique_id': '2f4b19d788a1e22c6e0af232cd9929df', 'score': None, 'source': 'AI Generated'}]}]
2025-09-10 18:12:14 | INFO     | mcp_client.py:process_stream_events:248 | -- Workflow tool 'gen_workflow' produced result with data: 1
2025-09-10 18:12:21 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 2
2025-09-10 18:12:21 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: recall_workflow
2025-09-10 18:12:21 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-10 18:12:21 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 3
2025-09-10 18:12:21 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: True
2025-09-10 18:12:21 | INFO     | mcp_client.py:comfyui_agent_invoke:355 |   - Ext types: ['workflow']
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: gen_workflow
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 1
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: True
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:355 |   - Ext types: ['workflow']
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:356 |   - Answer preview: Successfully generated a custom workflow: AI Generated Workflow

AI has generated a personalized wor...
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:364 | Workflow tools called: ['recall_workflow', 'gen_workflow']
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:368 | Both recall_workflow and gen_workflow were called, merging results
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:375 | recall_workflow succeeded with 3 workflows
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:376 |   - Workflow IDs: [3769, 3967, 26828]
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:383 | gen_workflow succeeded with 1 workflows
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:384 |   - Workflow IDs: [35420]
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 35420 - AI Generated Workflow
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 26828 - api-i2i_sdxl_revision_text_prompts
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:405 | Total workflows before deduplication: 4
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:406 | Total workflows after deduplication: 4
2025-09-10 18:12:22 | INFO     | mcp_client.py:comfyui_agent_invoke:414 | Returning 4 workflows from successful tools
2025-09-10 18:12:23 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 2419 chars, ext: True, finished: True
2025-09-10 18:27:38 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 18:27:39 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 18:27:39 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 18:27:39 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 18:27:39 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 18:29:37 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 18:29:38 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 31
2025-09-10 18:29:38 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 18:29:38 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 18:29:38 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 18:29:38 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 5 historical messages
2025-09-10 18:29:38 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 31 for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 18:29:38 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'workflow_checkpoint_id': 31, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 18:29:40 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 5 messages
2025-09-10 18:29:40 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 18:29:40 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 18:29:42 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'explain_node' was called
2025-09-10 18:29:43 | INFO     | mcp_client.py:process_stream_events:207 | -- Tool output: {"type":"text","text":"{\"data\":{\"nodes_name\":\"CLIP Text Encode (Prompt)\",\"nodes_class_name\":\"CLIPTextEncode\",\"nodes_extension\":\"ComfyUI\",\"nodes_category\":\"conditioning\",\"nodes_description\":{\"EN\":\"The CLIPTextEncode node is designed to encode textual input using a CLIP model, transforming text into a conditioning format suitable for further processing or integration with other models. It focuses on converting text prompts into a structured format that captures the essence of the input for use in conditioned generative tasks.\",\"ZH\":\"\"},\"nodes_inputs\":[{\"desc\":\"The 'text' parameter is the primary textual input that the node encodes. It plays a crucial role in determining the output conditioning, as it is directly processed by the CLIP model to generate embeddings.\",\"name\":\"text\",\"Comfy_dtype\":\"STRING\",\"is_required\":\"True\",\"python_dtype\":\"str\"},{\"desc\":\"The 'clip' parameter represents the CLIP model used for text tokenization and encoding. It is essential for transforming the input text into a format that can be utilized for conditioning in generative tasks.\",\"name\":\"clip\",\"Comfy_dtype\":\"CLIP\",\"is_required\":\"True\",\"python_dtype\":\"object\"}],\"nodes_outputs\":[{\"desc\":\"The output is a conditioning format that encapsulates the encoded text information, suitable for guiding generative models in producing content that aligns with the input text.\",\"name\":\"conditioning\",\"Comfy_dtype\":\"CONDITIONING\",\"python_dtype\":\"List[Tuple[torch.Tensor, Dict[str, torch.Tensor]]]\"}],\"extension_github_url\":\"https://github.com/comfyanonymous/ComfyUI\"},\"error\":null}","annotations":null,"meta":null}
2025-09-10 18:29:43 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'explain_node'
2025-09-10 18:29:43 | INFO     | mcp_client.py:process_stream_events:244 | -- Stored result for tool 'explain_node': data=8, ext=None
2025-09-10 18:29:46 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 1
2025-09-10 18:29:46 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: explain_node
2025-09-10 18:29:46 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-10 18:29:46 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 8
2025-09-10 18:29:46 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: False
2025-09-10 18:29:46 | INFO     | mcp_client.py:comfyui_agent_invoke:356 |   - Answer preview: None...
2025-09-10 18:29:46 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 18:29:46 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 18:29:46 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 1603 chars, ext: False, finished: True
2025-09-10 18:50:58 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 18:50:58 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 18:50:59 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 18:50:59 | INFO     | conversation_api.py:update_workflow_ui:572 | Received update-workflow-ui request
2025-09-10 18:50:59 | INFO     | conversation_api.py:update_workflow_ui:597 | Successfully updated workflow_data_ui for checkpoint ID: 28
2025-09-10 18:52:46 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 18:52:47 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 32
2025-09-10 18:52:47 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 18:52:47 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 18:52:47 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 18:52:47 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 7 historical messages
2025-09-10 18:52:47 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 32 for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 18:52:47 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'workflow_checkpoint_id': 32, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 18:52:47 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 7 messages
2025-09-10 18:52:47 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 18:52:47 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 18:52:51 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'recall_workflow' was called
2025-09-10 18:52:51 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'gen_workflow' was called
2025-09-10 18:53:34 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'recall_workflow'
2025-09-10 18:53:34 | INFO     | mcp_client.py:process_stream_events:248 | -- Workflow tool 'recall_workflow' produced result with data: 3
2025-09-10 18:53:34 | INFO     | mcp_client.py:process_stream_events:207 | -- Tool output: {"type":"text","text":"{\"answer\":\"Successfully generated a custom workflow: AI Generated Workflow\\n\\nAI has generated a personalized workflow solution for you. If you have any questions about the workflow, feel free to ask.\",\"data\":[{\"id\":35424,\"name\":\"AI Generated Workflow\",\"description\":\"Generate an image of a dog in a garden using the v1-5-pruned-emaonly.safetensors checkpoint.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"6e5be16973a64af24391f88fea16339f\",\"score\":null,\"source\":\"AI Generated\"}],\"ext\":[{\"type\":\"workflow\",\"data\":[{\"id\":35424,\"name\":\"AI Generated Workflow\",\"description\":\"Generate an image of a dog in a garden using the v1-5-pruned-emaonly.safetensors checkpoint.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"6e5be16973a64af24391f88fea16339f\",\"score\":null,\"source\":\"AI Generated\"}]}],\"instruction\":\"Generate an image of a dog in a garden using the v1-5-pruned-emaonly.safetensors checkpoint.\",\"keywords\":[\"dog\",\"garden\",\"image generation\",\"v1-5-pruned-emaonly\",\"checkpoint\"],\"source\":\"generated\"}","annotations":null,"meta":null}
2025-09-10 18:53:34 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'gen_workflow'
2025-09-10 18:53:34 | INFO     | mcp_client.py:process_stream_events:244 | -- Stored result for tool 'gen_workflow': data=1, ext=[{'type': 'workflow', 'data': [{'id': 35424, 'name': 'AI Generated Workflow', 'description': 'Generate an image of a dog in a garden using the v1-5-pruned-emaonly.safetensors checkpoint.', 'image': 'https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg', 'unique_id': '6e5be16973a64af24391f88fea16339f', 'score': None, 'source': 'AI Generated'}]}]
2025-09-10 18:53:34 | INFO     | mcp_client.py:process_stream_events:248 | -- Workflow tool 'gen_workflow' produced result with data: 1
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 2
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: recall_workflow
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 3
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: True
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:355 |   - Ext types: ['workflow']
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: gen_workflow
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 1
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: True
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:355 |   - Ext types: ['workflow']
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:356 |   - Answer preview: Successfully generated a custom workflow: AI Generated Workflow

AI has generated a personalized wor...
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:364 | Workflow tools called: ['recall_workflow', 'gen_workflow']
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:368 | Both recall_workflow and gen_workflow were called, merging results
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:375 | recall_workflow succeeded with 3 workflows
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:376 |   - Workflow IDs: [3769, 3967, 26828]
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:383 | gen_workflow succeeded with 1 workflows
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:384 |   - Workflow IDs: [35424]
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 35424 - AI Generated Workflow
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 26828 - api-i2i_sdxl_revision_text_prompts
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:405 | Total workflows before deduplication: 4
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:406 | Total workflows after deduplication: 4
2025-09-10 18:53:40 | INFO     | mcp_client.py:comfyui_agent_invoke:414 | Returning 4 workflows from successful tools
2025-09-10 18:53:40 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 2564 chars, ext: True, finished: True
2025-09-10 19:00:02 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 19:00:03 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 33
2025-09-10 19:00:04 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 19:00:04 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 19:00:04 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 19:00:04 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 9 historical messages
2025-09-10 19:00:04 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 33 for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 19:00:04 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'workflow_checkpoint_id': 33, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 19:00:07 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 9 messages
2025-09-10 19:00:07 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 19:00:07 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 19:00:12 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'recall_workflow' was called
2025-09-10 19:00:12 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'gen_workflow' was called
2025-09-10 19:00:41 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'recall_workflow'
2025-09-10 19:00:41 | INFO     | mcp_client.py:process_stream_events:248 | -- Workflow tool 'recall_workflow' produced result with data: 3
2025-09-10 19:00:41 | INFO     | mcp_client.py:process_stream_events:207 | -- Tool output: {"type":"text","text":"{\"answer\":\"Successfully generated a custom workflow: AI Generated Workflow\\n\\nAI has generated a personalized workflow solution for you. If you have any questions about the workflow, feel free to ask.\",\"data\":[{\"id\":35425,\"name\":\"AI Generated Workflow\",\"description\":\"Build a workflow that generates an image of a man holding an apple, ideally using a standard checkpoint model like v1-5-pruned-emaonly.safetensors.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"930f5eb07fa17b5c5a53c60b4cbcddf5\",\"score\":null,\"source\":\"AI Generated\"}],\"ext\":[{\"type\":\"workflow\",\"data\":[{\"id\":35425,\"name\":\"AI Generated Workflow\",\"description\":\"Build a workflow that generates an image of a man holding an apple, ideally using a standard checkpoint model like v1-5-pruned-emaonly.safetensors.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"930f5eb07fa17b5c5a53c60b4cbcddf5\",\"score\":null,\"source\":\"AI Generated\"}]}],\"instruction\":\"Build a workflow that generates an image of a man holding an apple, ideally using a standard checkpoint model like v1-5-pruned-emaonly.safetensors.\",\"keywords\":[\"man\",\"apple\",\"holding\",\"image generation\"],\"source\":\"generated\"}","annotations":null,"meta":null}
2025-09-10 19:00:41 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'gen_workflow'
2025-09-10 19:00:41 | INFO     | mcp_client.py:process_stream_events:244 | -- Stored result for tool 'gen_workflow': data=1, ext=[{'type': 'workflow', 'data': [{'id': 35425, 'name': 'AI Generated Workflow', 'description': 'Build a workflow that generates an image of a man holding an apple, ideally using a standard checkpoint model like v1-5-pruned-emaonly.safetensors.', 'image': 'https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg', 'unique_id': '930f5eb07fa17b5c5a53c60b4cbcddf5', 'score': None, 'source': 'AI Generated'}]}]
2025-09-10 19:00:41 | INFO     | mcp_client.py:process_stream_events:248 | -- Workflow tool 'gen_workflow' produced result with data: 1
2025-09-10 19:00:48 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 2
2025-09-10 19:00:48 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: recall_workflow
2025-09-10 19:00:48 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-10 19:00:48 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 3
2025-09-10 19:00:48 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: True
2025-09-10 19:00:48 | INFO     | mcp_client.py:comfyui_agent_invoke:355 |   - Ext types: ['workflow']
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: gen_workflow
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 1
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: True
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:355 |   - Ext types: ['workflow']
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:356 |   - Answer preview: Successfully generated a custom workflow: AI Generated Workflow

AI has generated a personalized wor...
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:364 | Workflow tools called: ['recall_workflow', 'gen_workflow']
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:368 | Both recall_workflow and gen_workflow were called, merging results
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:375 | recall_workflow succeeded with 3 workflows
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:376 |   - Workflow IDs: [4002, 26721, 26733]
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:383 | gen_workflow succeeded with 1 workflows
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:384 |   - Workflow IDs: [35425]
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 35425 - AI Generated Workflow
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 26721 - sdxl-t2i-api
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 26733 - image-edit-api
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:405 | Total workflows before deduplication: 4
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:406 | Total workflows after deduplication: 4
2025-09-10 19:00:49 | INFO     | mcp_client.py:comfyui_agent_invoke:414 | Returning 4 workflows from successful tools
2025-09-10 19:00:49 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 2678 chars, ext: True, finished: True
2025-09-10 19:16:43 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 19:17:07 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 19:17:08 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 34
2025-09-10 19:17:08 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 19:17:08 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 19:17:08 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 19:17:08 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 11 historical messages
2025-09-10 19:17:08 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 34 for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 19:17:08 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'workflow_checkpoint_id': 34, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 19:17:30 | ERROR    | mcp_client.py:comfyui_agent_invoke:486 | Error in comfyui_agent_invoke: unhandled errors in a TaskGroup (1 sub-exception)
2025-09-10 19:17:31 | ERROR    | mcp_client.py:comfyui_agent_invoke:487 | Traceback:   + Exception Group Traceback (most recent call last):
  |   File "D:\AI\ComfyUI\custom_nodes\ComfyUI-Copilot\backend\service\mcp_client.py", line 61, in comfyui_agent_invoke
  |     async with MCPServerSse(
  |   File "D:\venvs\comfyui\lib\site-packages\agents\mcp\server.py", line 237, in __aenter__
  |     await self.connect()
  |   File "D:\venvs\comfyui\lib\site-packages\agents\mcp\server.py", line 262, in connect
  |     transport = await self.exit_stack.enter_async_context(self.create_streams())
  |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 619, in enter_async_context
  |     result = await _cm_type.__aenter__(cm)
  |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
  |     return await anext(self.gen)
  |   File "D:\venvs\comfyui\lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |   File "D:\venvs\comfyui\lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    |     yield
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    |     resp = await self._pool.handle_async_request(req)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    |     raise exc from None
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    |     response = await connection.handle_async_request(
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    |     raise exc
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    |     stream = await self._connect(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    |     stream = await self._network_backend.connect_tcp(**kwargs)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    |     return await self._backend.connect_tcp(
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    |     with map_exceptions(exc_map):
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    |     raise to_exc(exc) from exc
    | httpcore.ConnectError: All connection attempts failed
    | 
    | The above exception was the direct cause of the following exception:
    | 
    | Traceback (most recent call last):
    |   File "D:\venvs\comfyui\lib\site-packages\mcp\client\sse.py", line 60, in sse_client
    |     async with aconnect_sse(
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
    |     return await anext(self.gen)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx_sse\_api.py", line 74, in aconnect_sse
    |     async with client.stream(method, url, headers=headers, **kwargs) as response:
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
    |     return await anext(self.gen)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1583, in stream
    |     response = await self.send(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1629, in send
    |     response = await self._send_handling_auth(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    |     response = await self._send_handling_redirects(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    |     response = await self._send_single_request(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    |     response = await transport.handle_async_request(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    |     with map_httpcore_exceptions():
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    |     raise mapped_exc(message) from exc
    | httpx.ConnectError: All connection attempts failed
    +------------------------------------

2025-09-10 19:17:31 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 19:17:31 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 115 chars, ext: False, finished: True
2025-09-10 19:18:15 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 19:18:16 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 35
2025-09-10 19:18:16 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 19:18:16 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 19:18:16 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 19:18:16 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 13 historical messages
2025-09-10 19:18:16 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 35 for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 19:18:16 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'workflow_checkpoint_id': 35, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 19:18:26 | ERROR    | mcp_client.py:comfyui_agent_invoke:486 | Error in comfyui_agent_invoke: unhandled errors in a TaskGroup (1 sub-exception)
2025-09-10 19:18:26 | ERROR    | mcp_client.py:comfyui_agent_invoke:487 | Traceback:   + Exception Group Traceback (most recent call last):
  |   File "D:\AI\ComfyUI\custom_nodes\ComfyUI-Copilot\backend\service\mcp_client.py", line 61, in comfyui_agent_invoke
  |     async with MCPServerSse(
  |   File "D:\venvs\comfyui\lib\site-packages\agents\mcp\server.py", line 237, in __aenter__
  |     await self.connect()
  |   File "D:\venvs\comfyui\lib\site-packages\agents\mcp\server.py", line 262, in connect
  |     transport = await self.exit_stack.enter_async_context(self.create_streams())
  |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 619, in enter_async_context
  |     result = await _cm_type.__aenter__(cm)
  |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
  |     return await anext(self.gen)
  |   File "D:\venvs\comfyui\lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |   File "D:\venvs\comfyui\lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    |     yield
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    |     resp = await self._pool.handle_async_request(req)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    |     raise exc from None
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    |     response = await connection.handle_async_request(
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    |     raise exc
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    |     stream = await self._connect(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 156, in _connect
    |     stream = await stream.start_tls(**kwargs)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_backends\anyio.py", line 67, in start_tls
    |     with map_exceptions(exc_map):
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    |     raise to_exc(exc) from exc
    | httpcore.ConnectError
    | 
    | The above exception was the direct cause of the following exception:
    | 
    | Traceback (most recent call last):
    |   File "D:\venvs\comfyui\lib\site-packages\mcp\client\sse.py", line 60, in sse_client
    |     async with aconnect_sse(
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
    |     return await anext(self.gen)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx_sse\_api.py", line 74, in aconnect_sse
    |     async with client.stream(method, url, headers=headers, **kwargs) as response:
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
    |     return await anext(self.gen)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1583, in stream
    |     response = await self.send(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1629, in send
    |     response = await self._send_handling_auth(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    |     response = await self._send_handling_redirects(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    |     response = await self._send_single_request(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    |     response = await transport.handle_async_request(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    |     with map_httpcore_exceptions():
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    |     raise mapped_exc(message) from exc
    | httpx.ConnectError
    +------------------------------------

2025-09-10 19:18:26 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 19:18:26 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 115 chars, ext: False, finished: True
2025-09-10 19:19:39 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 19:19:40 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 36
2025-09-10 19:19:40 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 19:19:40 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 19:19:40 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 19:19:40 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 15 historical messages
2025-09-10 19:19:40 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 36 for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 19:19:40 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'workflow_checkpoint_id': 36, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 19:20:02 | ERROR    | mcp_client.py:comfyui_agent_invoke:486 | Error in comfyui_agent_invoke: unhandled errors in a TaskGroup (1 sub-exception)
2025-09-10 19:20:02 | ERROR    | mcp_client.py:comfyui_agent_invoke:487 | Traceback:   + Exception Group Traceback (most recent call last):
  |   File "D:\AI\ComfyUI\custom_nodes\ComfyUI-Copilot\backend\service\mcp_client.py", line 61, in comfyui_agent_invoke
  |     async with MCPServerSse(
  |   File "D:\venvs\comfyui\lib\site-packages\agents\mcp\server.py", line 237, in __aenter__
  |     await self.connect()
  |   File "D:\venvs\comfyui\lib\site-packages\agents\mcp\server.py", line 262, in connect
  |     transport = await self.exit_stack.enter_async_context(self.create_streams())
  |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 619, in enter_async_context
  |     result = await _cm_type.__aenter__(cm)
  |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
  |     return await anext(self.gen)
  |   File "D:\venvs\comfyui\lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |   File "D:\venvs\comfyui\lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    |     yield
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    |     resp = await self._pool.handle_async_request(req)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    |     raise exc from None
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    |     response = await connection.handle_async_request(
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    |     raise exc
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    |     stream = await self._connect(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    |     stream = await self._network_backend.connect_tcp(**kwargs)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    |     return await self._backend.connect_tcp(
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    |     with map_exceptions(exc_map):
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    |     raise to_exc(exc) from exc
    | httpcore.ConnectError: All connection attempts failed
    | 
    | The above exception was the direct cause of the following exception:
    | 
    | Traceback (most recent call last):
    |   File "D:\venvs\comfyui\lib\site-packages\mcp\client\sse.py", line 60, in sse_client
    |     async with aconnect_sse(
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
    |     return await anext(self.gen)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx_sse\_api.py", line 74, in aconnect_sse
    |     async with client.stream(method, url, headers=headers, **kwargs) as response:
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
    |     return await anext(self.gen)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1583, in stream
    |     response = await self.send(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1629, in send
    |     response = await self._send_handling_auth(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    |     response = await self._send_handling_redirects(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    |     response = await self._send_single_request(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    |     response = await transport.handle_async_request(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    |     with map_httpcore_exceptions():
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    |     raise mapped_exc(message) from exc
    | httpx.ConnectError: All connection attempts failed
    +------------------------------------

2025-09-10 19:20:02 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 19:20:02 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 115 chars, ext: False, finished: True
2025-09-10 19:20:53 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 19:21:35 | ERROR    | llm_api.py:list_models:67 | Error in list_models: HTTPSConnectionPool(host='comfyui-copilot-server.onrender.com', port=443): Max retries exceeded with url: /v1/models (Caused by ConnectTimeoutError(<urllib3.connection.HTTPSConnection object at 0x000001B3C9821A50>, 'Connection to comfyui-copilot-server.onrender.com timed out. (connect timeout=None)'))
2025-09-10 19:21:35 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 19:21:35 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 37
2025-09-10 19:21:35 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 19:21:35 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 19:21:35 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 19:21:35 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 17 historical messages
2025-09-10 19:21:35 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 37 for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 19:21:35 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'workflow_checkpoint_id': 37, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 19:21:57 | ERROR    | mcp_client.py:comfyui_agent_invoke:486 | Error in comfyui_agent_invoke: unhandled errors in a TaskGroup (1 sub-exception)
2025-09-10 19:21:57 | ERROR    | mcp_client.py:comfyui_agent_invoke:487 | Traceback:   + Exception Group Traceback (most recent call last):
  |   File "D:\AI\ComfyUI\custom_nodes\ComfyUI-Copilot\backend\service\mcp_client.py", line 61, in comfyui_agent_invoke
  |     async with MCPServerSse(
  |   File "D:\venvs\comfyui\lib\site-packages\agents\mcp\server.py", line 237, in __aenter__
  |     await self.connect()
  |   File "D:\venvs\comfyui\lib\site-packages\agents\mcp\server.py", line 262, in connect
  |     transport = await self.exit_stack.enter_async_context(self.create_streams())
  |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 619, in enter_async_context
  |     result = await _cm_type.__aenter__(cm)
  |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
  |     return await anext(self.gen)
  |   File "D:\venvs\comfyui\lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |   File "D:\venvs\comfyui\lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    |     yield
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    |     resp = await self._pool.handle_async_request(req)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    |     raise exc from None
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    |     response = await connection.handle_async_request(
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    |     raise exc
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    |     stream = await self._connect(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    |     stream = await self._network_backend.connect_tcp(**kwargs)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    |     return await self._backend.connect_tcp(
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    |     with map_exceptions(exc_map):
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "D:\venvs\comfyui\lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    |     raise to_exc(exc) from exc
    | httpcore.ConnectError: All connection attempts failed
    | 
    | The above exception was the direct cause of the following exception:
    | 
    | Traceback (most recent call last):
    |   File "D:\venvs\comfyui\lib\site-packages\mcp\client\sse.py", line 60, in sse_client
    |     async with aconnect_sse(
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
    |     return await anext(self.gen)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx_sse\_api.py", line 74, in aconnect_sse
    |     async with client.stream(method, url, headers=headers, **kwargs) as response:
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 199, in __aenter__
    |     return await anext(self.gen)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1583, in stream
    |     response = await self.send(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1629, in send
    |     response = await self._send_handling_auth(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    |     response = await self._send_handling_redirects(
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    |     response = await self._send_single_request(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    |     response = await transport.handle_async_request(request)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    |     with map_httpcore_exceptions():
    |   File "C:\Users\91984\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "D:\venvs\comfyui\lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    |     raise mapped_exc(message) from exc
    | httpx.ConnectError: All connection attempts failed
    +------------------------------------

2025-09-10 19:21:57 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 19:21:57 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 115 chars, ext: False, finished: True
2025-09-10 19:22:19 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-10 19:26:09 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-10 19:26:12 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 38
2025-09-10 19:26:12 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-10 19:26:12 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-10 19:26:12 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-10 19:26:12 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 17 historical messages
2025-09-10 19:26:12 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 38 for session 0711a802-3967-42d6-a5c6-be3a98022ae3
2025-09-10 19:26:12 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '0711a802-3967-42d6-a5c6-be3a98022ae3', 'workflow_checkpoint_id': 38, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-10 19:26:15 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 17 messages
2025-09-10 19:26:15 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-10 19:26:15 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-10 19:26:22 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 0
2025-09-10 19:26:22 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-10 19:26:22 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-10 19:26:22 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 69 chars, ext: False, finished: True
